<!DOCTYPE html>
<html lang="ru">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Document</title>
    <script src="https://code.jquery.com/jquery-3.5.1.min.js"></script>
    <script src="script.js"></script>
</head>
<body>
    <div id="container">
        <div id="pole"></div>
        <div id="me"></div>
        <div id="main"></div>
        <div id="time">0</div>
        <div id="time_hod">0</div>
        <div id="hod">0</div>
        <div id="collect_k"></div>
        <div id="coins"></div>
        <div id="key"></div>
        <div id="door"></div>
        <div id="walls"></div>
        <div id="checkes"></div>
        <div id="smoke_all"></div>
        <div id="text_add_walls">ADD WALLS</div>
        <div id="text_add_key">ADD KEY</div>
        <div id="text_add_door">ADD DOOR</div>
        <div id="check">CHECK</div>
        <div id="start">START</div>
        <div id="generate">GENERATE</div>
        <div id="generate_noise">GENERATE NOISE</div>
        <div id="check_wait">CHECKING LEVEL. PLESE WAIT!</div>
        <div id="win">YOU WIN</div>
        <div id="restart">RESTART</div>
        <div id="alert"></div>
        <div id="alert_ok">OK</div>
        <div id="alert_fon"></div>
        <div id="version">v 0.9.12</div>
    </div>
</body>
<script type="text/javascript">
    let level_is_ok = 0;
    let keys = 0;
    let doors = 0;
    let is_key = 0;
    let is_door = 0;
    let collect_keys = 0;
    let walls = 0;
    let w_k_d = 0;
    let pos = [0, 0];
    let pos_b = pos;
    let interval = 500;
    let time_pass = 0;
    let time_pass_hod = 0;
    let hodov = 0;
    let score = 0;
    let game_is_alredy_start = 0;
    let level_is_pased = 0;
    let level_is_started = 0;
    let is_break = 1;
    let time_speed = 100;
    let timer_func = 0;
    let lenWw = 50;
    for (let i = 0; i < 100; i++) {
        let y = Math.trunc(i/10)
        let x = i%10
        block = "<div id='"+(x+"_"+y)+"' class='block button'></div>"
        $("#pole").append(block)
    }

    function my_alert(type, text){
        $("#alert").text(text);
        $("#alert").css({
            "display": "block",
            "top": "-15vw",
            "background-image": "url(images/"+type+"_128_2.png)"
        });
        $("#alert_fon").css({
            "display": "block"
        });
        $("#alert_ok").css({
            "display": "block"
        });
        setTimeout(() => {
            $("#alert_fon").css({
                "opacity": "1"
            });
            $("#alert_ok").css({
                "opacity": "1"
            });
            $("#alert").css({
                "top": "5vw"
            });
        }, 300);
    }
    $("#alert_ok").click(function () {
        $("#alert").css({
            "top": "-15vw"
        });
        $("#alert_fon").css({
            "opacity": "0"
        });
        $("#alert_ok").css({
            "opacity": "0"
        });
        setTimeout(() => {
            $("#alert_fon").css({
                "display": "none"
            });
            $("#alert_ok").css({
                "display": "none"
            });
            $("#alert").css({
                "display": "none"
            });
        }, 300);
    });
    
    function near(){
        level_is_ok = 0;
        if (pos[0]-1 >= 0) {
            x = pos[0]-1
            y = pos[1]
            $("#"+x+"_"+y).attr("class", "block_near button");
            if (document.getElementById(x+"_"+y+"_smoke") != null) {
                $("#"+x+"_"+y+"_smoke").attr("class", "smoke_near button");
                $("#"+x+"_"+y+"_smoke").attr("onclick", "smoke_n(id)");
            }
        }
        if (pos[0]+1 <= 9) {
            x = pos[0]+1
            y = pos[1]
            $("#"+x+"_"+y).attr("class", "block_near button");
            if (document.getElementById(x+"_"+y+"_smoke") != null) {
                $("#"+x+"_"+y+"_smoke").attr("class", "smoke_near button");
                $("#"+x+"_"+y+"_smoke").attr("onclick", "smoke_n(id)");
            }
        }
        if (pos[1]-1 >= 0) {
            x = pos[0]
            y = pos[1]-1
            $("#"+x+"_"+y).attr("class", "block_near button");
            if (document.getElementById(x+"_"+y+"_smoke") != null) {
                $("#"+x+"_"+y+"_smoke").attr("class", "smoke_near button");
                $("#"+x+"_"+y+"_smoke").attr("onclick", "smoke_n(id)");
            }
        }
        if (pos[1]+1 <= 9) {
            x = pos[0]
            y = pos[1]+1
            $("#"+x+"_"+y).attr("class", "block_near button");
            if (document.getElementById(x+"_"+y+"_smoke") != null) {
                $("#"+x+"_"+y+"_smoke").attr("class", "smoke_near button");
                $("#"+x+"_"+y+"_smoke").attr("onclick", "smoke_n(id)");
            }
        }
    }
    
    $("#restart").click(function(){
        $("#start").css({
            "width": "390px",
            "opacity": "1",
            "display": "block",
            "top": "610px",
            "font-size": "2em"
        });
        $("#generate").css({
            "display": "block",
            "opacity": "1"
        });
        $("#walls").children().remove();
        $("#smoke_all").children().remove();
        $("#door").children().remove();
        $("#key").children().remove();
        $(".button").attr("class", "block button");
        $("#text_add_walls").css("display", "block");
        $("#text_add_door").css("display", "block");
        $("#text_add_key").css("display", "block");
        $("#check").css("display", "block");
        start_game();
        $("#win").css({
            "display": "none",
            "opacity": "0"
        });
        keys = 0
        collect_keys = 0
        doors = 0
        game_is_alredy_start = 0
        level_is_ok = 0
        level_is_started = 0
        level_is_pased = 0
        time_pass = 0
        time_pass_hod = 0
        hodov = 0
        is_break = 1
        $("#collect_k").text(collect_keys);
        $("#time").text(time_pass/100);
        $("#time_hod").text(time_pass/100);
        $("#hod").text(hodov);
    });
    function start_game(){
        wid = parseInt($("body").css("width"))
        left_pole = ((wid-390)/2)-2+"px";
        left_pole_2 = ((wid-390)/2)+200+"px";
        left_score = ((wid-390)/2)+93+"px";
        $("#pole").css("left", left_pole);
        $("#text_add_walls").css("left", left_pole);
        $("#text_add_key").css("left", left_pole_2);
        $("#text_add_door").css("left", left_pole);
        $("#start").css("left", left_pole);
        $("#generate").css("left", left_pole);
        $("#generate_noise").css({
            "left": left_pole,
            "display": "none"
        });
        $("#restart").css({
            "left": left_pole,
            "opacity": "0",
            "display": "none"
        });
        $("#main").css("left", left_pole);
        $("#time").css("left", left_score);
        $("#time_hod").css("left", left_score);
        $("#collect_k").css("left", left_pole);
        $("#hod").css("right", left_pole);
        $("#check").css("left", left_pole_2);
        $("#pole").css("top", "100px");
        $("#score").text(score);
        $("#collect_k").text(collect_keys);
        pos[0] = Math.floor(Math.random() * (10));
        pos[1] = Math.floor(Math.random() * (10));
        $("#me").css({
            "left": ((wid-390)/2)+(pos[0]*39)+"px",
            "top": 102+(pos[1]*39)+"px"
        });
        near();
    }
    setTimeout(() => {
        start_game();
    }, 1);
    function button_click_n(id) {
        let walk_ok = 1;
        x = parseInt(id.split("_")[0]);
        y = parseInt(id.split("_")[1]);
        x_mod = x-pos[0];
        y_mod = y-pos[1];
        pos_x_n = pos[0]+x_mod;
        pos_y_n = pos[1]+y_mod;
        is_break = 0;
        if (level_is_started == 1) {
            hodov = hodov + 1;
            $("#hod").text(hodov);
        }
        function while_walk() {
            setTimeout(() => {
                if (walk_ok == 1) {
                    $(".block_near").attr("class", "block button");
                    $(".smoke_near").attr("class", "smoke");
                    function remove_smoke_n(id) {
                        $("#"+id).attr("class", "smoke");
                        $("#"+id).css("display", "none");
                        $("#"+id).removeAttr("onclick");
                    }
                    if (document.getElementById(pos_x_n+"_"+pos_y_n+"_key") == null && document.getElementById(pos_x_n+"_"+pos_y_n+"_door") == null && document.getElementById(pos_x_n+"_"+pos_y_n+"_wall") == null && pos_x_n >= 0 && pos_x_n <= 9 && pos_y_n >= 0 && pos_y_n <= 9) {
                        pos[0] = pos_x_n;
                        pos[1] = pos_y_n;
                        remove_smoke_n((pos[0]+x_mod)+"_"+(pos[1]+y_mod)+"_smoke");
                        while_walk();
                    }
                    else if (document.getElementById(pos_x_n+"_"+pos_y_n+"_key") != null && level_is_started == 1){
                        key_click("near_"+pos_x_n+"_"+pos_y_n);
                        remove_smoke_n((pos[0]+x_mod)+"_"+(pos[1]+y_mod)+"_smoke");
                        while_walk();
                    }
                    else if (document.getElementById(pos_x_n+"_"+pos_y_n+"_key") != null){
                        pos[0] = pos_x_n;
                        pos[1] = pos_y_n;
                        remove_smoke_n((pos[0]+x_mod)+"_"+(pos[1]+y_mod)+"_smoke");
                        while_walk();
                    }
                    else{
                        walk_ok = 0;
                        is_break = 1;
                        time_pass = 0;
                        near();
                    }
                    pos_x_n = pos[0]+x_mod;
                    pos_y_n = pos[1]+y_mod;
                }
                $("#me").css({
                    "left": ((wid-390)/2)+(pos[0]*39)+"px",
                    "top": 102+(pos[1]*39)+"px"
                });
            }, 100);
        }
        while_walk();
    }
    $(".button").click(function(){
        if ($(this).attr("class") == "block_near button") {
            button_click_n($(this).attr("id"));
        }
    });
    function smoke_n(id_this) {
        if ($("#"+id_this).attr("class") == "smoke_near button") {
            $("#"+id_this).css("display", "none");
            $("#"+id_this).removeAttr("onclick");
            button_click_n(id_this);
            function del_near(x, y) {
                $("#"+x+"_"+y+"_smoke").attr("class", "smoke");
            }
            if (pos_b[0]+1 <= 9) {
                del_near(pos_b[0]+1, pos_b[1]);
            }
            if (pos_b[0]-1 >= 0) {
                del_near(pos_b[0]-1, pos_b[1]);
            }
            if (pos_b[1]+1 <= 9) {
                del_near(pos_b[0], pos_b[1]+1);
            }
            if (pos_b[1]-1 >= 0) {
                del_near(pos_b[0], pos_b[1]-1);
            }
            pos_b[0] = pos[0]
            pos_b[1] = pos[1]
            near();
        }
    }
    $("#text_add_walls").click(function(){
        if (w_k_d != 1) {
            $(".block_near").attr("class", "block button");
            $("#text_add_key").text("ADD KEY");
            $("#text_add_door").text("ADD DOOR");
            w_k_d = 1
            $("#text_add_walls").text("DONE");
            level_is_ok = 0
        }
        else if (w_k_d == 1){
            w_k_d = 0
            $("#text_add_walls").text("ADD WALLS");
            level_is_ok = 0
            near();
        }
    });
    $("#text_add_key").click(function(){
        if (w_k_d != 2) {
            $(".block_near").attr("class", "block button");
            $("#text_add_door").text("ADD DOOR");
            $("#text_add_walls").text("ADD WALLS");
            w_k_d = 2
            $("#text_add_key").text("DONE");
            level_is_ok = 0
        }
        else if (w_k_d == 2){
            w_k_d = 0
            $("#text_add_key").text("ADD KEY");
            level_is_ok = 0
            near();
        }
    });
    $("#text_add_door").click(function(){
        if (w_k_d != 3) {
            $(".block_near").attr("class", "block button");
            $("#text_add_key").text("ADD KEY");
            $("#text_add_walls").text("ADD WALLS");
            w_k_d = 3
            $("#text_add_door").text("DONE");
            level_is_ok = 0
        }
        else if (w_k_d == 3){
            w_k_d = 0
            $("#text_add_door").text("ADD DOOR");
            level_is_ok = 0
            near();
        }
    });
    $(".block").click(function(){
        if (w_k_d == 1 && $(this).attr("class") == "block button") {
            pos_b = $(this).attr("id");
            pos_0 = pos_b.split("_")[0]
            pos_1 = pos_b.split("_")[1]
            if (pos[0] != pos_0 || pos[1] != pos_1) {
                function check_wall(pos_0, pos_1){
                    fat_wall = 0
                    function fat_w_ch(x, y) {
                        return document.getElementById(x+"_"+y+"_wall");
                    }
                    if (fat_w_ch(pos_0-1, pos_1-1) != null && fat_w_ch(pos_0, pos_1-1) != null && fat_w_ch(pos_0-1, pos_1) != null) {
                        fat_wall = 1;
                    }
                    if (fat_w_ch(pos_0+1, pos_1+1) != null && fat_w_ch(pos_0, pos_1+1) != null && fat_w_ch(pos_0+1, pos_1) != null) {
                        fat_wall = 1;
                    }
                    if (fat_w_ch(pos_0+1, pos_1-1) != null && fat_w_ch(pos_0, pos_1-1) != null && fat_w_ch(pos_0+1, pos_1) != null) {
                        fat_wall = 1;
                    }
                    if (fat_w_ch(pos_0-1, pos_1+1) != null && fat_w_ch(pos_0, pos_1+1) != null && fat_w_ch(pos_0-1, pos_1) != null) {
                        fat_wall = 1;
                    }
                    return fat_wall;
                }
                

                if (check_wall(parseInt(pos_0), parseInt(pos_1)) == 0) {
                    wall = "<div id='"+(pos_0+"_"+pos_1+"_wall")+"' class='wall' onclick='wall_click(id)'></div>"
                    $("#walls").append(wall)
                    id_wall = String("#"+pos_0+"_"+pos_1+"_wall")
                    $(id_wall).css({
                        "left": ((wid-390)/2)-2+(pos_0*39)+"px",
                        "top": 100+(pos_1*39)+"px"
                    });
                }
                else{
                    my_alert("warn", "YOU CAN'T DO FAT WALLS!");
                }
            }
        }
        else if (w_k_d == 2 && $(this).attr("class") == "block button") {
            pos_b = $(this).attr("id");
            pos_0 = pos_b.split("_")[0]
            pos_1 = pos_b.split("_")[1]
            if ((pos[0] != pos_0 || pos[1] != pos_1) && keys <= 2) {
                key = "<div id='"+(pos_0+"_"+pos_1+"_key")+"' class='key' onclick='key_click(id)'></div>"
                $("#key").append(key)
                id_key = String("#"+pos_0+"_"+pos_1+"_key")
                $(id_key).css({
                    "left": ((wid-390)/2)-2+(pos_0*39)+"px",
                    "top": 100+(pos_1*39)+"px"
                });
                keys = keys+1
            }
        }
        else if (w_k_d == 3 && $(this).attr("class") == "block button") {
            pos_b = $(this).attr("id");
            pos_0 = pos_b.split("_")[0]
            pos_1 = pos_b.split("_")[1]
            if ((pos[0] != pos_0 || pos[1] != pos_1) && doors <= 2) {
                door = "<div id='"+(pos_0+"_"+pos_1+"_door")+"' class='door' onclick='door_click(id)'></div>"
                $("#door").append(door)
                id_door = String("#"+pos_0+"_"+pos_1+"_door")
                $(id_door).css({
                    "left": ((wid-390)/2)-2+(pos_0*39)+"px",
                    "top": 100+(pos_1*39)+"px"
                });
                doors = doors+1
            }
        }
    });
    function wall_click(id){
        if (w_k_d == 1) {
            $("#"+id).remove()
        }
    };
    function key_click(id){
        if (w_k_d == 2) {
            $("#"+id).remove()
            keys = keys-1
        }
        else if (w_k_d == 0 && level_is_started == 1) {
            if (id.split("_")[0] == "near") {
                id_key_now = id.split("_")[1]+"_"+id.split("_")[2]+"_key"
                $("#"+id_key_now).remove()
                keys = keys-1
                collect_keys = collect_keys+1
                $("#collect_k").text(collect_keys);
            }
            else{
                okey = 0
                for (let i = 0; i < $(".block_near").length; i++) {
                    id_block = $(".block_near:eq("+i+")").attr("id");
                    id_key = id;
                    if (id_block.split("_")[0] == id_key.split("_")[0] && id_block.split("_")[1] == id_key.split("_")[1]) {
                        okey = 1
                    }
                }
                if (okey == 1) {
                    $("#"+id).remove()
                    keys = keys-1
                    collect_keys = collect_keys+1
                    $("#collect_k").text(collect_keys);
                }
            }
        }
    };
    function door_click(id){
        if (w_k_d == 3) {
            $("#"+id).remove()
            doors = doors-1
        }
        else if (w_k_d == 0) {
            if (collect_keys != 0) {
                okey = 0
                for (let i = 0; i < $(".block_near").length; i++) {
                    id_block = $(".block_near:eq("+i+")").attr("id");
                    id_door = id;
                    function opened(id_d) {
                        return $("#"+id_d).attr("class");
                    }
                    if (id_block.split("_")[0] == id_door.split("_")[0] && id_block.split("_")[1] == id_door.split("_")[1] && opened(id) != "door opened") {
                        okey = 1
                    }
                }
                if (okey == 1) {
                    doors = doors-1;
                    $("#"+id).css("background-image", "url('images/door_128.png')");
                    $("#"+id).addClass("opened");
                    collect_keys = collect_keys - 1;
                    if (doors == 0) {
                        level_is_pased = 1
                        $("#win").css("display", "block");
                        $("#win").text("YOU WIN IN "+time_pass_hod/100+"sec AND "+hodov+"moves");
                        setTimeout(() => {
                            $("#win").css("opacity", "1");
                            $("#restart").css("display", "block");
                        }, 1000);
                        setTimeout(() => {
                            $("#restart").css("opacity", "1");
                        }, 2000);
                    }
                }
            }
            $("#collect_k").text(collect_keys);
        }
    };
    $("#check").click(function(){
        let prefunc_level_is_ok;
        $("#check_wait").css("display", "block");
        function me_key_check(pos_check_0, pos_check_1, type) {
            prefunc_level_is_ok = 0;
            let wall_id;
            let check_id;
            let key_id;
            let door_id;
            key_is = 0;
            door_is = 0;
            function get_element(x, y){
                wall_id = document.getElementById(x+"_"+y+"_wall")
                return wall_id
            }
            if (type == "me") {
                checker_place_first(pos_check_0, pos_check_1);
            }
            else if (type == "key" && (level_is_ok == 1 && ((get_element(pos_check_0+1, pos_check_1) != null || get_element(pos_check_0-1, pos_check_1) != null || get_element(pos_check_0, pos_check_1+1) != null || get_element(pos_check_0, pos_check_1-1) != null) || (level_is_ok == 1 || (pos_check_0 == 0||pos_check_0 == 9||pos_check_1 == 9||pos_check_1 == 0))))) {
                checker_place_first(pos_check_0, pos_check_1);
            }
            
            function checker_place_first(pos_0, pos_1, napr){
                pos_0 = parseInt(pos_0)
                pos_1 = parseInt(pos_1)
                function get_element(x, y){
                    wall_id = document.getElementById(x+"_"+y+"_wall")
                    return wall_id
                }
                function get_element_c(x, y, napravl){
                    check_id = document.getElementById(x+"_"+y+"_checker_"+napravl)
                    return check_id
                }
                function get_element_k(x, y, napravl){
                    key_id = document.getElementById(x+"_"+y+"_key");
                    okey_key = 0;
                    if (napravl == "left") {
                        if (document.getElementById((x+1)+"_"+y+"_checker_left") != null) {
                            okey_key = 1
                        }
                    }
                    else if (napravl == "right") {
                        if (document.getElementById((x-1)+"_"+y+"_checker_right") != null) {
                            okey_key = 1
                        }
                    }
                    else if (napravl == "top") {
                        if (document.getElementById(x+"_"+(y+1)+"_checker_top") != null) {
                            okey_key = 1
                        }
                    }
                    else if (napravl == "down") {
                        if (document.getElementById(x+"_"+(y-1)+"_checker_down") != null) {
                            okey_key = 1
                        }
                    }
                    else if (napravl == "active") {
                        if (document.getElementById((x+1)+"_"+y+"_checker_active") != null || document.getElementById((x-1)+"_"+y+"_checker_active") != null || document.getElementById(x+"_"+(y+1)+"_checker_active") != null || document.getElementById(x+"_"+(y-1)+"_checker_active") != null) {
                            okey_key = 1
                        }
                    }
                    if ($("#"+x+"_"+y+"_key").attr("class") != "key checked" && okey_key == 1) {
                        $("#"+x+"_"+y+"_key").addClass("checked");
                        return key_id;
                    }
                    else if ($("#"+x+"_"+y+"_key").attr("class") == "key checked"){
                        return 1
                    }
                    else {
                        return null;
                    }
                }
                function get_element_d(x, y, napravl){
                    door_id = document.getElementById(x+"_"+y+"_door");
                    okey_door = 0;
                    if (napravl == "left") {
                        if (document.getElementById((x+1)+"_"+y+"_checker_left") != null) {
                            okey_door = 1
                        }
                    }
                    else if (napravl == "right") {
                        if (document.getElementById((x-1)+"_"+y+"_checker_right") != null) {
                            okey_door = 1
                        }
                    }
                    else if (napravl == "top") {
                        if (document.getElementById(x+"_"+(y+1)+"_checker_top") != null) {
                            okey_door = 1
                        }
                    }
                    else if (napravl == "down") {
                        if (document.getElementById(x+"_"+(y-1)+"_checker_down") != null) {
                            okey_door = 1
                        }
                    }
                    else if (napravl == "active") {
                        if (document.getElementById((x+1)+"_"+y+"_checker_active") != null || document.getElementById((x-1)+"_"+y+"_checker_active") != null || document.getElementById(x+"_"+(y+1)+"_checker_active") != null || document.getElementById(x+"_"+(y-1)+"_checker_active") != null) {
                            okey_door = 1
                        }
                    }
                    if ($("#"+x+"_"+y+"_door").attr("class") != "door checked" && okey_door == 1) {
                        $("#"+x+"_"+y+"_door").addClass("checked");
                        return door_id;
                    }
                    else if ($("#"+x+"_"+y+"_door").attr("class") == "door checked"){
                        return 1
                    }
                    else {
                        return null;
                    }
                }
                function check_all(pos_x, pos_y, naprav) {
                    ok = null
                    door_check = get_element_d(pos_x, pos_y, naprav);
                    key_check = get_element_k(pos_x, pos_y, naprav);
                    if (get_element(pos_x, pos_y, naprav) != null || get_element_c(pos_x, pos_y, naprav) != null || door_check != null) {
                        ok = "no_ok"
                    }
                    if (key_check != null) {
                        if (key_check != 1) {
                            is_key = is_key + 1
                        }
                    }
                    if (door_check != null) {
                        if (door_check != 1) {
                            is_door = is_door + 1
                        }
                    }
                    return ok
                }
                if (pos_0-1 >= 0 && check_all(pos_0-1, pos_1, "left") == null) {
                    checker = "<div id='"+((pos_0-1)+"_"+pos_1+"_checker_left")+"' class='checker'></div>"
                    $("#checkes").append(checker)
                    id_checker = String("#"+(pos_0-1)+"_"+pos_1+"_checker_left")
                    $(id_checker).css({
                        "left": ((wid-390)/2)-2+((pos_0-1)*39)+"px",
                        "top": 100+(pos_1*39)+"px"
                    });
                }
                if (pos_0+1 <= 9 && check_all(pos_0+1, pos_1, "right") == null) {
                    checker = "<div id='"+((pos_0+1)+"_"+pos_1+"_checker_right")+"' class='checker'></div>"
                    $("#checkes").append(checker)
                    id_checker = String("#"+(pos_0+1)+"_"+pos_1+"_checker_right")
                    $(id_checker).css({
                        "left": ((wid-390)/2)-2+((pos_0+1)*39)+"px",
                        "top": 100+(pos_1*39)+"px"
                    });
                }
                if (pos_1-1 >= 0 && check_all(pos_0, pos_1-1, "top") == null) {
                    checker = "<div id='"+(pos_0+"_"+(pos_1-1)+"_checker_top")+"' class='checker'></div>"
                    $("#checkes").append(checker)
                    id_checker = String("#"+pos_0+"_"+(pos_1-1)+"_checker_top")
                    $(id_checker).css({
                        "left": ((wid-390)/2)-2+(pos_0*39)+"px",
                        "top": 100+((pos_1-1)*39)+"px"
                    });
                }
                if (pos_1+1 <= 9 && check_all(pos_0, pos_1+1, "down") == null) {
                    checker = "<div id='"+(pos_0+"_"+(pos_1+1)+"_checker_down")+"' class='checker'></div>"
                    $("#checkes").append(checker)
                    id_checker = String("#"+pos_0+"_"+(pos_1+1)+"_checker_down")
                    $(id_checker).css({
                        "left": ((wid-390)/2)-2+(pos_0*39)+"px",
                        "top": 100+((pos_1+1)*39)+"px"
                    });
                }
            }
            //////////////////////////////////////////////////
            function checker_place(pos_0, pos_1, napr){
                pos_0 = parseInt(pos_0)
                pos_1 = parseInt(pos_1)
                function get_element(x, y){
                    wall_id = document.getElementById(x+"_"+y+"_wall")
                    return wall_id
                }
                function get_element_c(x, y, napravl){
                    check_id = document.getElementById(x+"_"+y+"_checker_"+napravl)
                    return check_id
                }
                function get_element_k(x, y, napravl){
                    key_id = document.getElementById(x+"_"+y+"_key");
                    okey_key = 0;
                    if (napravl == "left") {
                        if (document.getElementById((x+1)+"_"+y+"_checker_left") != null) {
                            okey_key = 1
                        }
                    }
                    else if (napravl == "right") {
                        if (document.getElementById((x-1)+"_"+y+"_checker_right") != null) {
                            okey_key = 1
                        }
                    }
                    else if (napravl == "top") {
                        if (document.getElementById(x+"_"+(y+1)+"_checker_top") != null) {
                            okey_key = 1
                        }
                    }
                    else if (napravl == "down") {
                        if (document.getElementById(x+"_"+(y-1)+"_checker_down") != null) {
                            okey_key = 1
                        }
                    }
                    else if (napravl == "active") {
                        if (document.getElementById((x+1)+"_"+y+"_checker_active") != null || document.getElementById((x-1)+"_"+y+"_checker_active") != null || document.getElementById(x+"_"+(y+1)+"_checker_active") != null || document.getElementById(x+"_"+(y-1)+"_checker_active") != null) {
                            okey_key = 1
                        }
                    }
                    if ($("#"+x+"_"+y+"_key").attr("class") != "key checked" && okey_key == 1) {
                        $("#"+x+"_"+y+"_key").addClass("checked");
                        return key_id;
                    }
                    else if ($("#"+x+"_"+y+"_key").attr("class") == "key checked"){
                        return 1
                    }
                    else {
                        return null;
                    }
                }
                function get_element_d(x, y, napravl){
                    door_id = document.getElementById(x+"_"+y+"_door");
                    okey_door = 0;
                    if (napravl == "left") {
                        if (document.getElementById((x+1)+"_"+y+"_checker_left") != null) {
                            okey_door = 1
                        }
                    }
                    else if (napravl == "right") {
                        if (document.getElementById((x-1)+"_"+y+"_checker_right") != null) {
                            okey_door = 1
                        }
                    }
                    else if (napravl == "top") {
                        if (document.getElementById(x+"_"+(y+1)+"_checker_top") != null) {
                            okey_door = 1
                        }
                    }
                    else if (napravl == "down") {
                        if (document.getElementById(x+"_"+(y-1)+"_checker_down") != null) {
                            okey_door = 1
                        }
                    }
                    else if (napravl == "active") {
                        if (document.getElementById((x+1)+"_"+y+"_checker_active") != null || document.getElementById((x-1)+"_"+y+"_checker_active") != null || document.getElementById(x+"_"+(y+1)+"_checker_active") != null || document.getElementById(x+"_"+(y-1)+"_checker_active") != null) {
                            okey_door = 1
                        }
                    }
                    if ($("#"+x+"_"+y+"_door").attr("class") != "door checked" && okey_door == 1) {
                        $("#"+x+"_"+y+"_door").addClass("checked");
                        return door_id;
                    }
                    else if ($("#"+x+"_"+y+"_door").attr("class") == "door checked"){
                        return 1
                    }
                    else {
                        return null;
                    }
                }
                function check_all(pos_x, pos_y, naprav) {
                    ok = null
                    door_check = get_element_d(pos_x, pos_y, naprav);
                    key_check = get_element_k(pos_x, pos_y, naprav);
                    if (get_element(pos_x, pos_y, naprav) != null || get_element_c(pos_x, pos_y, naprav) != null || door_check != null) {
                        ok = "no_ok"
                    }
                    if (key_check != null) {
                        if (key_check != 1) {
                            is_key = is_key + 1
                        }
                    }
                    if (door_check != null) {
                        if (door_check != 1) {
                            is_door = is_door + 1
                        }
                    }
                    return ok
                }
                
                if (pos_0-1 >= 0 && check_all(pos_0-1, pos_1, "left") == null && napr == "left") {
                    checker = "<div id='"+((pos_0-1)+"_"+pos_1+"_checker_left")+"' class='checker'></div>"
                    $("#checkes").append(checker)
                    id_checker = String("#"+(pos_0-1)+"_"+pos_1+"_checker_left")
                    $(id_checker).css({
                        "left": ((wid-390)/2)-2+((pos_0-1)*39)+"px",
                        "top": 100+(pos_1*39)+"px"
                    });
                }
                if ((pos_0-1 < 0 || check_all(pos_0-1, pos_1, "left") != null) && get_element_c(pos_0-1, pos_1, "left") == null && napr == "left"){
                    $(String("#"+pos_0+"_"+pos_1+"_checker_left")).attr("id", pos_0+"_"+pos_1+"_checker_active");
                }
                
                if (pos_0+1 <= 9 && check_all(pos_0+1, pos_1, "right") == null && napr == "right") {
                    checker = "<div id='"+((pos_0+1)+"_"+pos_1+"_checker_right")+"' class='checker'></div>"
                    $("#checkes").append(checker)
                    id_checker = String("#"+(pos_0+1)+"_"+pos_1+"_checker_right")
                    $(id_checker).css({
                        "left": ((wid-390)/2)-2+((pos_0+1)*39)+"px",
                        "top": 100+(pos_1*39)+"px"
                    });
                }
                if ((pos_0+1 == 10 || check_all(pos_0+1, pos_1, "right") != null) && get_element_c(pos_0+1, pos_1, "right") == null && napr == "right"){
                    $(String("#"+pos_0+"_"+pos_1+"_checker_right")).attr("id", pos_0+"_"+pos_1+"_checker_active");
                }
                
                if (pos_1-1 >= 0 && check_all(pos_0, pos_1-1, "top") == null && napr == "top") {
                    checker = "<div id='"+(pos_0+"_"+(pos_1-1)+"_checker_top")+"' class='checker'></div>"
                    $("#checkes").append(checker)
                    id_checker = String("#"+pos_0+"_"+(pos_1-1)+"_checker_top")
                    $(id_checker).css({
                        "left": ((wid-390)/2)-2+(pos_0*39)+"px",
                        "top": 100+((pos_1-1)*39)+"px"
                    });
                }
                if ((pos_1-1 < 0 || check_all(pos_0, pos_1-1, "top") != null) && get_element_c(pos_0, pos_1-1, "top") == null && napr == "top"){
                    $(String("#"+pos_0+"_"+pos_1+"_checker_top")).attr("id", pos_0+"_"+pos_1+"_checker_active");
                }
                
                if (pos_1+1 <= 9 && check_all(pos_0, pos_1+1, "down") == null && napr == "down") {
                    checker = "<div id='"+(pos_0+"_"+(pos_1+1)+"_checker_down")+"' class='checker'></div>"
                    $("#checkes").append(checker)
                    id_checker = String("#"+pos_0+"_"+(pos_1+1)+"_checker_down")
                    $(id_checker).css({
                        "left": ((wid-390)/2)-2+(pos_0*39)+"px",
                        "top": 100+((pos_1+1)*39)+"px"
                    });
                }
                if ((pos_1+1 == 10 || check_all(pos_0, pos_1+1, "down") != null) && get_element_c(pos_0, pos_1+1, "down") == null && napr == "down"){
                    $(String("#"+pos_0+"_"+pos_1+"_checker_down")).attr("id", pos_0+"_"+pos_1+"_checker_active");
                }
            }
            setTimeout(() => {
                for (let j = 0; j < 100; j++) {
                    setTimeout(() => {
                        for (let i = 0; i < 500-$("#walls").length; i++) {
                            if (i < $("#checkes").children().length) {
                                check_id = $("#checkes").children()[i].id
                                x_coord = parseInt(check_id.split("_")[0]);
                                y_coord = parseInt(check_id.split("_")[1]);
                                napravleniye = check_id.split("_")[3];
                                if (napravleniye != "active") {
                                    checker_place(x_coord, y_coord, napravleniye);
                                }
                                else{
                                    checker_place_first(x_coord, y_coord, napravleniye);
                                }
                            }
                        }
                        setTimeout(() => {
                            for (let i = 0; i < 500-$("#walls").length; i++) {
                                if (i < $("#checkes").children().length) {
                                    check_id = $("#checkes").children()[i].id
                                    x_coord = parseInt(check_id.split("_")[0]);
                                    y_coord = parseInt(check_id.split("_")[1]);
                                    napravleniye = check_id.split("_")[3];
                                    if (napravleniye == "active") {
                                        checker_place_first(x_coord, y_coord, napravleniye);
                                    }
                                }
                            } 
                        }, 25);
                    }, j*50);
                }
            }, 1);
            setTimeout(() => {
                if (is_key == 0 || is_door == 0 || is_key != is_door) {
                    $(".door").removeClass("checked");
                    $(".key").removeClass("checked");
                    $("#checkes").children().remove();
                    prefunc_level_is_ok = 0
                }
                else{
                    $(".door").removeClass("checked");
                    $(".key").removeClass("checked");
                    $("#checkes").children().remove();
                    prefunc_level_is_ok = 1
                }
                is_door = 0
                is_key = 0
            }, 200);
        }
        me_key_check(pos[0], pos[1], "me")
        setTimeout(() => {
            if (prefunc_level_is_ok == 1) {
                level_is_ok = level_is_ok + 1;
            }
        }, 220);
        setTimeout(() => {
            for (let ki = 0; ki < $(".key").length; ki++) {
                setTimeout(() => {
                    let pos_key = [0, 0];
                    pos_key[0] = $(".key:eq("+ki+")").attr("id").split("_")[0];
                    pos_key[1] = $(".key:eq("+ki+")").attr("id").split("_")[1];
                    me_key_check(pos_key[0], pos_key[1], "key")
                    setTimeout(() => {
                        if (prefunc_level_is_ok == 1) {
                            level_is_ok = level_is_ok + 1;
                        }
                    }, 220);
                }, ki*500);
            }
        }, 250);
        
        
        setTimeout(() => {
            $("#check_wait").css("display", "none");
            if (level_is_ok != $(".key").length+1) {
                my_alert("cross", "YOUR LEVEL ISN'T CORRECT!");
                level_is_ok = 0;
                $(".door").removeClass("checked");
                $(".key").removeClass("checked");
            }
            else{
                my_alert("tick", "YOUR LEVEL IS CORRECT!");
                level_is_ok = 1;
                $(".door").removeClass("checked");
                $(".key").removeClass("checked");
            }
            $("#checkes").children().remove();
        }, 2000);
    });
    $("#start").click(function(){
        if (w_k_d != 0){
            w_k_d = 0;
            $("#text_add_key").text("ADD KEY");
            $("#text_add_walls").text("ADD WALLS");
            $("#text_add_door").text("ADD DOOR");
        }
        let wall_id
        let check_id
        if (level_is_ok == 1 && w_k_d == 0) {
            level_is_pased = 0;
            level_is_started = 1;
            is_break = 1;
            smoke_place(pos[0], pos[1]);
            function smoke_place(pos_0, pos_1){
                function get_element_s(x, y){
                    smoke_id = document.getElementById(x+"_"+y+"_smoke")
                    return smoke_id
                }
                function get_element_m(x, y){
                    oke = null
                    if (pos[0] != x || pos[1] != y) {
                        oke = null
                    }
                    else{
                        oke = "not null"
                    }
                    return oke
                }
                function check_all(pos_x, pos_y) {
                    ok = null
                    if (get_element_s(pos_x, pos_y) != null || get_element_m(pos_x, pos_y) != null) {
                        ok = "no_ok"
                    }
                    return ok
                }
                if (pos_0-1 >= 0 && check_all(pos_0-1, pos_1) == null) {
                    smoke = "<div id='"+((pos_0-1)+"_"+pos_1+"_smoke")+"' class='smoke'></div>"
                    $("#smoke_all").append(smoke)
                    id_smoke = String("#"+(pos_0-1)+"_"+pos_1+"_smoke")
                    $(id_smoke).css({
                        "left": ((wid-390)/2)-2+((pos_0-1)*39)+"px",
                        "top": 100+(pos_1*39)+"px"
                    });
                }
                if (pos_0+1 <= 9 && check_all(pos_0+1, pos_1) == null) {
                    smoke = "<div id='"+((pos_0+1)+"_"+pos_1+"_smoke")+"' class='smoke'></div>"
                    $("#smoke_all").append(smoke)
                    id_smoke = String("#"+(pos_0+1)+"_"+pos_1+"_smoke")
                    $(id_smoke).css({
                        "left": ((wid-390)/2)-2+((pos_0+1)*39)+"px",
                        "top": 100+(pos_1*39)+"px"
                    });
                }
                if (pos_1-1 >= 0 && check_all(pos_0, pos_1-1) == null) {
                    smoke = "<div id='"+(pos_0+"_"+(pos_1-1)+"_smoke")+"' class='smoke'></div>"
                    $("#smoke_all").append(smoke)
                    id_smoke = String("#"+pos_0+"_"+(pos_1-1)+"_smoke")
                    $(id_smoke).css({
                        "left": ((wid-390)/2)-2+(pos_0*39)+"px",
                        "top": 100+((pos_1-1)*39)+"px"
                    });
                }
                if (pos_1+1 <= 9 && check_all(pos_0, pos_1+1) == null) {
                    smoke = "<div id='"+(pos_0+"_"+(pos_1+1)+"_smoke")+"' class='smoke'></div>"
                    $("#smoke_all").append(smoke)
                    id_smoke = String("#"+pos_0+"_"+(pos_1+1)+"_smoke")
                    $(id_smoke).css({
                        "left": ((wid-390)/2)-2+(pos_0*39)+"px",
                        "top": 100+((pos_1+1)*39)+"px"
                    });
                }
            }
            setTimeout(() => {
                for (let i = 0; i < 100; i++) {
                    setTimeout(() => {
                        smoke_id = $("#smoke_all").children()[i].id
                        x_coord = parseInt(smoke_id.split("_")[0]);
                        y_coord = parseInt(smoke_id.split("_")[1]);
                        smoke_place(x_coord, y_coord);
                    }, i**1.4);
                }
            }, 1);
            setTimeout(() => {
                $("#start").css({
                    "top": "500px",
                    "height": "100px"
                });
                $("#generate").css("opacity", "0");
                setTimeout(() => {
                    $("#text_add_door").css("display", "none");
                    $("#check").css("display", "none");
                    $("#start").css("height", "45px");
                }, 250);
                setTimeout(() => {
                    $("#text_add_walls").css("display", "none");
                    $("#text_add_key").css("display", "none");
                    $("#generate").css("display", "none");
                }, 500);
                setTimeout(() => {
                    $("#start").css({
                        "width": "45px",
                        "font-size": "0.6em",
                        "opacity": "0"
                    });
                }, 750);
                setTimeout(() => {
                    $("#start").css("display", "none");
                }, 1250);
            }, 1000);
            if (timer_func == 0) {
                time_sec();
                timer_func = 1;
            }
            function time_sec(){
                setTimeout(() => {
                    setInterval(() => {
                        if (level_is_started == 1) {
                            if (level_is_pased == 0 && is_break == 1 && time_pass < 3000) {
                                time_pass = time_pass + 5;
                                if (String(time_pass/100).length <= 3) {
                                    $("#time").text(time_pass/100);
                                }
                            }
                            else if (level_is_pased == 0 && is_break == 0 && time_pass < 3000){
                                time_pass_hod = time_pass_hod + 5;
                                if (String(time_pass_hod/100).length <= 3) {
                                    $("#time_hod").text(time_pass/100);
                                }
                            }
                            else if (level_is_pased == 0 && is_break == 1 && time_pass >= 3000){
                                hodov = hodov+1;
                                $("#hod").text(hodov);
                                time_pass = 0;
                            }
                            else{
                                return;
                            }
                        }
                    }, time_speed/2);
                }, 550);
            }
            setTimeout(() => {
                near(); 
            }, 700);
        }
        else if (level_is_ok != 1) {
            my_alert("warn", "CHECK YOUR LEVEL!");
        }
    });
    $("#generate").click(function(){
        if (w_k_d == 0 && level_is_started == 0) {
            $("#walls").children().remove()
            let lenW = 10
            let value = [];
            function noise(nx, ny) {
                return (nx, ny) / 2 + 0.5;
            }
            for (let x = 0; x < lenW; x++) {
                value[x] = [];
                for (let y = 0; y < lenW; y++) {
                    function getInt(max) {
                        return Math.floor(Math.random() * Math.floor(max));
                    }
                    let nx;
                    let ny;
                    if ((getInt(100)/100) >= 0.5) {
                        if ((getInt(100)/100) >= 0.5) {
                            nx = (x)/lenW - 0.5;
                            ny = (y)/lenW - 0.5;
                        }
                        else{
                            nx = (lenW-x)/lenW - 0.5;
                            ny = (lenW-y)/lenW - 0.5;
                        } 
                    }
                    else{
                        if ((getInt(100)/100) >= 0.5) {
                            ny = (x)/lenW - 0.5;
                            nx = (y)/lenW - 0.5;
                        }
                        else{
                            ny = (lenW-x)/lenW - 0.5;
                            nx = (lenW-y)/lenW - 0.5;
                        }
                    }
                    if (noise(nx, ny) >= 0.55) {
                        value[x][y] = 1;
                    }
                    else{
                        value[x][y] = 0;
                    }
                }
            }
            for (let x = 0; x < lenW; x++) {
                for (let y = 0; y < lenW; y++) {
                    if (value[x][y]==1) {
                        function check_wall(pos_0, pos_1){
                            fat_wall = 0
                            function fat_w_ch(x, y) {
                                return document.getElementById(x+"_"+y+"_wall");
                            }
                            if (fat_w_ch(pos_0-1, pos_1-1) != null && fat_w_ch(pos_0, pos_1-1) != null && fat_w_ch(pos_0-1, pos_1) != null) {
                                fat_wall = 1;
                            }
                            if (fat_w_ch(pos_0+1, pos_1+1) != null && fat_w_ch(pos_0, pos_1+1) != null && fat_w_ch(pos_0+1, pos_1) != null) {
                                fat_wall = 1;
                            }
                            if (fat_w_ch(pos_0+1, pos_1-1) != null && fat_w_ch(pos_0, pos_1-1) != null && fat_w_ch(pos_0+1, pos_1) != null) {
                                fat_wall = 1;
                            }
                            if (fat_w_ch(pos_0-1, pos_1+1) != null && fat_w_ch(pos_0, pos_1+1) != null && fat_w_ch(pos_0-1, pos_1) != null) {
                                fat_wall = 1;
                            }
                            return fat_wall;
                        }
                        if (check_wall(x, y) == 0 && ((pos[0] != x || pos[1] != y)&&((pos[0]+1 != x || pos[1] != y) && (pos[0]-1 != x || pos[1] != y) && (pos[0] != x || pos[1]-1 != y) && (pos[0] != x || pos[1]+1 != y)))) {
                            wall = "<div id='"+(x+"_"+y+"_wall")+"' class='wall' onclick='wall_click(id)'></div>"
                            $("#walls").append(wall);
                            id_wall = String("#"+x+"_"+y+"_wall")
                            $(id_wall).css({
                                "left": ((wid-390)/2)-2+(x*39)+"px",
                                "top": 100+(y*39)+"px"
                            });
                        }
                    }
                }
            }
        }
    });
    $("#generate_noise").click(function(){
        if (w_k_d == 0 && level_is_started == 0) {
            $("#walls").children().remove();
            let value = [];
            function noise(nx, ny) {
                return (nx, ny) / 2 + 0.5;
            }
            for (let x = 0; x < lenWw; x++) {
                value[x] = [];
                for (let y = 0; y < lenWw; y++) {
                    function getInt(max) {
                        return Math.floor(Math.random() * Math.floor(max));
                    }
                    let nx;
                    let ny;
                    if ((getInt(100)/100) >= 0.5) {
                        if ((getInt(100)/100) >= 0.5) {
                            nx = (x)/lenWw - 0.5;
                            ny = (y)/lenWw - 0.5;
                        }
                        else{
                            nx = (lenWw-x)/lenWw - 0.5;
                            ny = (lenWw-y)/lenWw - 0.5;
                        } 
                    }
                    else{
                        if ((getInt(100)/100) >= 0.5) {
                            ny = (x)/lenWw - 0.5;
                            nx = (y)/lenWw - 0.5;
                        }
                        else{
                            ny = (lenWw-x)/lenWw - 0.5;
                            nx = (lenWw-y)/lenWw - 0.5;
                        }
                    }
                    value[x][y] = noise(nx, ny);
                }
            }
            for (let x = 0; x < lenWw; x++) {
                for (let y = 0; y < lenWw; y++) {
                    wall = "<div id='"+(x+"_"+y+"_wall")+"' class='wall_noise'></div>"
                    $("#walls").append(wall);
                    id_wall = String("#"+x+"_"+y+"_wall")
                    $(id_wall).css({
                        "left": ((wid-390)/2)-2+(x*(390/lenWw))+"px",
                        "top": 100+(y*(390/lenWw))+"px",
                        "width": (400/lenWw) + "px",
                        "height": (400/lenWw) + "px",
                        "background-color": "rgb("+(255*value[x][y])+","+(255*(1-value[x][y]))+",0)"
                    });
                }
            }
        }
    });
</script>
<style>
    *{
        margin: 0;
        padding: 0;
    }
    #pole{
        width: 390px;
        height: 390px;
        position: absolute;
    }
    #time{
        width: 200px;
        height: 45px;
        position: fixed;
        top: 45px;
        border-radius: 5px;
        border: 2px solid rgb(41, 41, 41);
        font-size: 2.2em;
        text-align: center;
    }
    #time_hod{
        width: 200px;
        height: 45px;
        position: fixed;
        top: 45px;
        border-radius: 5px;
        border: 2px solid rgb(41, 41, 41);
        font-size: 2.2em;
        text-align: center;
        display: none;
    }
    #main{
        width: 390px;
        height: 90px;
        position: fixed;
        border-radius: 5px;
        border: 2px solid black;
        font-size: 2em;
        text-align: left;
    }
    #collect_k{
        width: 80px;
        height: 45px;
        position: fixed;
        top: 45px;
        border-radius: 5px;
        border: 2px solid rgb(41, 41, 41);
        font-size: 2em;
        text-align: center;
        color: rgb(218, 167, 0);
    }
    #hod{
        width: 80px;
        height: 45px;
        position: fixed;
        top: 45px;
        border-radius: 5px;
        border: 2px solid rgb(41, 41, 41);
        font-size: 2em;
        text-align: center;
        color: rgb(3, 0, 167);
    }
    #text_add_walls{
        width: 185px;
        height: 45px;
        position: fixed;
        top: 500px;
        border-radius: 5px;
        border: 2px solid black;
        background-color: rgb(233, 233, 233);
        text-align: center;
        font-size: 2em;
        transition: 0.5s;
    }
    #text_add_key{
        width: 185px;
        height: 45px;
        position: fixed;
        top: 500px;
        border-radius: 5px;
        border: 2px solid rgb(44, 155, 0);
        background-color: rgb(233, 233, 233);
        text-align: center;
        font-size: 2em;
        transition: 0.5s;
    }
    #text_add_door{
        width: 185px;
        height: 45px;
        position: fixed;
        top: 555px;
        border-radius: 5px;
        border: 2px solid rgb(155, 62, 0);
        background-color: rgb(233, 233, 233);
        text-align: center;
        font-size: 2em;
        transition: 0.5s;
    }
    #check{
        width: 185px;
        height: 45px;
        position: fixed;
        top: 555px;
        border-radius: 5px;
        border: 2px solid rgb(59, 0, 155);
        background-color: rgb(233, 233, 233);
        font-size: 2em;
        text-align: center;
        transition: 0.5s;
    }
    #start{
        width: 390px;
        height: 45px;
        position: fixed;
        top: 610px;
        border-radius: 5px;
        border: 2px solid rgb(231, 216, 0);
        background-color: rgb(233, 233, 233);
        font-size: 2em;
        text-align: center;
        transition: 0.5s;
    }
    #generate{
        width: 390px;
        height: 45px;
        position: fixed;
        top: 665px;
        border-radius: 5px;
        border: 2px solid rgb(118, 0, 197);
        background-color: rgb(233, 233, 233);
        font-size: 2em;
        text-align: center;
        transition: 0.5s;
    }
    #generate_noise{
        width: 390px;
        height: 45px;
        position: fixed;
        top: 720px;
        border-radius: 5px;
        border: 2px solid rgb(197, 0, 49);
        background-color: rgb(233, 233, 233);
        font-size: 2em;
        text-align: center;
        transition: 0.5s;
    }
    #restart{
        width: 390px;
        height: 45px;
        position: fixed;
        top: 100px;
        border-radius: 5px;
        border: 2px solid rgb(0, 177, 231);
        background-color: rgb(233, 233, 233);
        font-size: 2em;
        text-align: center;
        transition: 0.5s;
        display: none;
        opacity: 0;
        z-index: 1001;
    }
    .block{
        width: 37px;
        height: 37px;
        border-radius: 10px;
        border: 2px solid rgb(100, 100, 100);
        background-color: rgb(200, 200, 200);
        display:inline-block;
        margin-right: -2px;
        margin-bottom: -6px;
        z-index: 0;
    }
    .block_near{
        width: 37px;
        height: 37px;
        border-radius: 10px;
        border: 2px solid rgb(255, 91, 91);
        background-color: rgb(161, 161, 161);
        display:inline-block;
        margin-right: -2px;
        margin-bottom: -6px;
        z-index: 10;
    }
    .wall{
        width: 37px;
        height: 37px;
        border-radius: 3px;
        border: 2px solid rgb(177, 177, 177);
        background-color: rgb(66, 66, 66);
        position: absolute;
        margin-right: -2px;
        margin-bottom: -2px;
        z-index: 10;
    }
    .wall_noise{
        width: 7.4px;
        height: 7.4px;
        background-color: rgb(66, 66, 66);
        position: absolute;
        margin-right: -2px;
        margin-bottom: -2px;
        z-index: 10;
    }
    .checker{
        width: 37px;
        height: 37px;
        border-radius: 3px;
        border: 2px solid rgb(177, 177, 177);
        background-color: rgb(63, 0, 146);
        position: absolute;
        margin-right: -2px;
        margin-bottom: -2px;
        z-index: 10;
    }
    .smoke{
        width: 37px;
        height: 37px;
        border-radius: 3px;
        border: 2px solid rgb(185, 185, 185);
        background-color: rgb(185, 185, 185);
        position: absolute;
        margin-right: -2px;
        margin-bottom: -2px;
        z-index: 10;
        opacity: 1;
        transition: 0.2s;
    }
    .smoke_near{
        width: 37px;
        height: 37px;
        border-radius: 3px;
        border: 2px solid rgb(255, 91, 91);
        background-color: rgb(185, 185, 185);
        position: absolute;
        margin-right: -2px;
        margin-bottom: -2px;
        z-index: 100;
        opacity: 1;
        transition: 0.2s;
    }
    .door{
        width: 37px;
        height: 37px;
        border-radius: 3px;
        border: 2px solid rgb(255, 0, 0);
        background-color: rgb(153, 23, 0);
        background-image: url("images/door_128_lock.png");
        background-size: contain;
        position: absolute;
        margin-right: -2px;
        margin-bottom: -2px;
        z-index: 10;
    }
    #me{
        position: absolute;
        width: 33px;
        height: 33px;
        border-radius: 10px;
        border: 2px solid rgb(22, 0, 95);
        background-color: rgb(0, 52, 112);
        transition: 0.1s;
    }
    .coin{
        position: absolute;
        width: 15px;
        height: 15px;
        border-radius: 5px;
        border: 2px solid rgb(223, 200, 0);
        background-color: rgb(173, 156, 0);
        transition: 0.25s;
    }
    .coin_start{
        position: absolute;
        width: 25px;
        height: 25px;
        border-radius: 5px;
        border: 2px solid rgb(223, 200, 0);
        background-color: rgb(173, 156, 0);
        transition: 0.25s;
    }
    .key{
        width: 37px;
        height: 37px;
        border-radius: 6px;
        border: 2px solid rgb(136, 255, 0);
        background-color: rgb(134, 218, 0);
        background-image: url("images/key_128.png");
        background-size: contain;
        position: absolute;
        margin-right: -2px;
        margin-bottom: -2px;
        z-index: 10;
    }
    #check_wait{
        position: fixed;
        text-align: center;
        font-size: 2.5em;
        padding-top: 45vh;
        top: 0;
        left: 0;
        width: 100vw;
        height: 100vh;
        background-color: rgba(0, 0, 0, 0.55);
        color: whitesmoke;
        display: none;
        transition: 1s;
        z-index: 100;
    }
    #win{
        position: fixed;
        text-align: center;
        font-size: 2.5em;
        padding-top: 45vh;
        top: 0;
        left: 0;
        width: 100vw;
        height: 100vh;
        background-color: dimgrey;
        color: whitesmoke;
        display: none;
        opacity: 0;
        transition: 1s;
        z-index: 100;
    }
    #alert{
        width: 18vw;
        height: 12vw;
        background-color: rgb(230, 230, 230);
        position: fixed;
        top: 0vw;
        left: 40vw;
        border-radius: 2vw;
        text-align: center;
        background-image: url("images/cross_128_2.png");
        background-repeat: no-repeat;
        background-size: 14vw;
        background-position: 10vw;
        font-size: 2.2em;
        overflow-wrap: break-word;
        overflow: hidden;
        overflow-y: auto;
        text-shadow: 1px 1px 1px white;
        padding: 1vw;
        z-index: 9998;
        display: none;
        transition: 0.3s;
    }
    #alert_fon{
        background-color: rgba(0, 0, 0, 0.5);
        width: 100vw;
        height: 100vh;
        top: 0;
        left: 0;
        position: fixed;
        display: none;
        opacity: 0;
        transition: 0.3s;
        z-index: 9997;
    }
    #alert_ok{
        width: 4vw;
        height: 2vw;
        background-color: rgb(40, 180, 0);
        position: fixed;
        top: 16vw;
        left: 47.5vw;
        border-radius: 1vw;
        z-index: 9998;
        color: white;
        font-size: 2em;
        padding: 0.5vw;
        text-align: center;
        opacity: 0;
        display: none;
        transition: 0.3s;
    }
    #version{
        position: fixed;
        bottom: 0.4em;
        right: 0.4em;
        z-index: 9999;
    }
</style>
</html>